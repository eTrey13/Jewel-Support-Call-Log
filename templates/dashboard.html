{% set months = ["", "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"] %}


{% extends "layout.html" %}

{% block title %}
    Dashboard
{% endblock %}


{% block main %}

<h1>{{ agent.username }}</h1>
<br>

{% set month_parts = month.split('-') %}

<h3>Support calls - {{ months[month_parts[0] | int] }} {{ month_parts[1] }} - {{ sumTotalTime // 60 }}:{{ '{:02d}'.format(sumTotalTime % 60) }} hours</h3>

<form>
    <label for="month">Select Month:</label>
    <select id="month" name="month">
        {% for i in range(1, months|length) %}
            <option value="{{ '{:02d}'.format(i) }}" {% if '{:02d}'.format(i) == month_parts[0] %}selected{% endif %}>{{ months[i]}}</option>
        {% endfor %}
    </select>

    <label for="year">Select Year:</label>
    <select id="year" name="year">
        {% if month_parts[1]|int < 2023 %}
            <option value="{{ month_parts[1] }}" selected>{{ month_parts[1] }}</option>
        {% endif %}
        {% for year in range(2023, currentYear + 1) %}
            <option value="{{ year }}" {% if year == month_parts[1]|int %}selected{% endif %}>{{ year }}</option>
        {% endfor %}
        {% if month_parts[1]|int > currentYear %}
            <option value="{{ month_parts[1] }}" selected>{{ month_parts[1] }}</option>
        {% endif %}
    </select>

    <button class="btn btn-primary" onclick="window.location.href=`/dashboard?month=${month.value}-${year.value}`;return false;" style="padding-top: 0rem; padding-bottom: 0rem; padding-left: 0.5rem; padding-right: 0.5rem;">Go</button>
    <button class="btn btn-primary" onclick="window.location.href=`/dashboard`;return false;" style="padding-top: 0rem; padding-bottom: 0rem; padding-left: 0.5rem; padding-right: 0.5rem;">Current</button>
</form>


{% with selection={}, doPaging=True %}
    {% include "calls-table.html" %}
{% endwith %}

{% endblock %}

{% block script %}
{% endblock %}

{% block style %}

{% endblock %}